(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{33:function(e,t,n){e.exports=n(45)},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var s,a=n(0),c=n.n(a),o=n(17),u=n.n(o),m=n(6),r=n(25),l=n(21),i={text:"New custom message",canDelete:!0,messageType:"custom",messageContent:"This is only service message"},g=[].concat([{id:0,text:"lorem ipsum 1",canDelete:!1,btcAmount:556e-6,messageType:"single",messageContent:"message content 1"},{id:1,text:"lorem ipsum 2",canDelete:!0,btcAmount:.0026,messageType:"single",messageContent:"message content 2"},{id:2,text:"lorem ipsum 3",canDelete:!0,btcAmount:.0087,messageType:"single",messageContent:"message content 3"},{id:3,text:"lorem ipsum 4",canDelete:!1,btcAmount:.034556,messageType:"single",messageContent:"message content 4"},{id:4,text:"lorem ipsum 5",canDelete:!0,btcAmount:.004656,messageType:"single",messageContent:"message content 5"},{id:5,text:"lorem ipsum 6",canDelete:!1,btcAmount:.7663,messageContent:[{source:"source1",amount:.00443},{source:"source2",amount:.0366},{source:"source3",amount:.1874}],messageType:"multiple"},{id:6,text:"lorem ipsum 7",canDelete:!0,btcAmount:.00764,messageContent:[{source:"source1",amount:.355},{source:"source2",amount:.8451},{source:"source3",amount:.00123}],messageType:"multiple"},{id:7,text:"lorem ipsum 8",canDelete:!1,btcAmount:.887711,messageContent:[{source:"source1",amount:.0043},{source:"source2",amount:.9983},{source:"source3",amount:.764}],messageType:"multiple"}]).sort((function(){return Math.random()-.5}));!function(e){e.custom="custom",e.multiple="multiple",e.single="single"}(s||(s={}));var p=Object(l.a)({name:"rate",initialState:{messages:[],customCount:0},reducers:{load:function(e,t){e.messages=t.payload},addServiceMessage:function(e,t){var n=t.payload,a=n.message,c=n.after,o=Object(r.a)(Object(r.a)({},i),{},{id:"custom_".concat(e.customCount),messageType:s.custom,text:a||i.text});e.customCount++,e.messages.splice(e.messages.findIndex((function(e){return e.id===c}))+1,0,o)},deleteMessage:function(e,t){var n=t.payload;e.messages.splice(e.messages.findIndex((function(e){return e.id===n})),1)}}}),b=p.actions,d=b.load,f=b.addServiceMessage,v=b.deleteMessage,j=p.reducer,O=n(12),y=n(29),C=n.n(y),E=n(10),x=Object(E.a)((function(e){var t;return null===(t=e.rate.value)||void 0===t?void 0:t.bpi.USD.rate_float}),(function(e){return e})),k=function(e){var t=e.message,n=e.addServiceMessage,o=e.deleteMessage,u=Object(m.c)(x),r=Object(a.useRef)(null),l=Object(a.useState)(!1),i=Object(O.a)(l,2),g=i[0],p=i[1],b=Object(a.useCallback)((function(){p(!0)}),[p]),d=Object(a.useCallback)((function(){return p(!1)}),[]),f=Object(a.useCallback)((function(){var e;n(t.id,(null===(e=r.current)||void 0===e?void 0:e.value)||""),p(!1)}),[n,t,r,p]),v=Object(a.useCallback)((function(){o(t.id)}),[o,t]);return c.a.createElement("div",{key:t.id,className:C()("message",{"message-custom":t.messageType===s.custom,"message-multiple":t.messageType===s.multiple,"message-single":t.messageType===s.single})},c.a.createElement("div",{className:"text"},t.text),t.btcAmount&&void 0!==u&&c.a.createElement("div",{className:"btc-amount"},(u*t.btcAmount).toFixed(2)),c.a.createElement("div",{className:"content"},t.messageContent instanceof Array?t.messageContent.map((function(e){return c.a.createElement("div",{className:"content-message",key:e.source},c.a.createElement("span",null,"amount: ",e.amount)," ",c.a.createElement("span",null,"source: ",e.source))})):t.messageContent),[s.multiple,s.single].includes(t.messageType)&&(g?c.a.createElement("div",{className:"control-component"},c.a.createElement("input",{ref:r}),c.a.createElement("button",{className:"control-component",onClick:d},"Cancel"),c.a.createElement("button",{className:"control-component",onClick:f},"Add")):c.a.createElement("button",{className:"control-component",onClick:b},"Add service message")),t.canDelete&&c.a.createElement("button",{className:"control-component",onClick:v},"Delete"))},T=(n(44),function(e){var t=Object(m.b)(),n=Object(a.useCallback)((function(e,n){t(f({after:e,message:n}))}),[t]),s=Object(a.useCallback)((function(e){t(v(e))}),[t]);return c.a.createElement("div",{className:"messages-list"},e.messages.map((function(e){return c.a.createElement(k,{addServiceMessage:n,deleteMessage:s,key:e.id,message:e})})))}),A=n(48),D=n(46),N=Object(l.a)({name:"rate",initialState:{value:null},reducers:{update:function(e,t){e.value=t.payload}}}),S=N.actions.update,M=N.reducer,h=n(30),w=n(47),I=function(){var e=Object(a.useState)(!1),t=Object(O.a)(e,2),n=t[0],s=t[1],c=Object(m.b)();return Object(a.useEffect)((function(){var e=Object(h.a)(g).pipe(Object(w.a)(500)).subscribe((function(e){c(d(e)),s(!0)}));return function(){return e.unsubscribe()}}),[c]),n},J=Object(E.a)((function(e){return e.messages.messages}),(function(e){return e})),U=(n(27),function(){var e=function(){var e=Object(a.useState)(!1),t=Object(O.a)(e,2),n=t[0],s=t[1],c=Object(m.b)();return Object(a.useEffect)((function(){var e=Object(A.a)(1e4).pipe(Object(D.a)((function(){return fetch("https://api.coindesk.com/v1/bpi/currentprice/USD.json").then((function(e){return e.json()}))}))).subscribe((function(e){s(!0),c(S(e))}));return function(){return e.unsubscribe()}}),[c]),n}(),t=I(),n=e&&t,s=Object(m.c)(J);return n?c.a.createElement(T,{messages:s}):c.a.createElement("div",null,c.a.createElement("span",null,"We are loading rate for u. Wait a bit "),c.a.createElement("i",{className:"fas fa-spinner fa-spin"}))}),W=n(4),_=Object(W.c)({rate:M,messages:j}),B=Object(W.e)(_,{});u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(m.a,{store:B},c.a.createElement(U,null))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.ee6b1292.chunk.js.map